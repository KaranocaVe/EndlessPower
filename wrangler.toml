# Cloudflare Workers 配置 (wrangler v4)
name = "endlesspower"
main = "src/worker/index.ts"
compatibility_date = "2025-12-01"

[assets]
directory = "./dist"

[observability.logs]
enabled = true

[build]
command = "npm run build"

[[durable_objects.bindings]]
name = "VISITORS_COUNTER"
class_name = "VisitorsCounter"

[[migrations]]
tag = "v2"
new_sqlite_classes = ["VisitorsCounter"]

[env.dev]
name = "endlesspower"
main = "src/worker/index.ts"
compatibility_date = "2025-12-01"
vars = { NODE_ENV = "development" }

[env.dev.assets]
directory = "./dist"

[[env.dev.durable_objects.bindings]]
name = "VISITORS_COUNTER"
class_name = "VisitorsCounter"

[env.production]
name = "endlesspower"
main = "src/worker/index.ts"
compatibility_date = "2025-12-01"
vars = { NODE_ENV = "production" }

[env.production.assets]
directory = "./dist"

[[env.production.durable_objects.bindings]]
name = "VISITORS_COUNTER"
class_name = "VisitorsCounter"

